= Первый CI/CD пайплайн на GitHub Actions
:source-highlighter: highlight.js

== Цели урока

* Понять базовую структуру workflow в GitHub Actions.
* Создать простейший "Hello, World!" пайплайн.
* Разобрать ключевые понятия: `on`, `jobs`, `runs-on`, `steps`.

---

== Теория

CI/CD (Continuous Integration / Continuous Delivery) — это практика автоматизации этапов разработки. Начнем с создания самого простого пайплайна, который будет запускаться при изменениях в коде.

[source,yaml]
----
name: Basic CI
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  hello_world_job:
    name: Say Hello
    runs-on: macos-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Print Xcode version
        run: |
          echo "Hello, world!"
          xcodebuild -version
----

Давайте разберем этот файл по частям:

=== `name: Basic CI`

Это просто имя вашего workflow. Оно будет отображаться в интерфейсе GitHub Actions и помогает быстро понять, что делает этот пайплайн.

=== `on:` - Триггеры запуска Workflow

Секция `on:` определяет, когда этот workflow будет запускаться. В нашем случае он настроен на два типа событий:

*   `push:`: Workflow запустится при каждом `push` (отправке изменений) в *любую* ветку (`'**'`). Это полезно для быстрой обратной связи по изменениям.
*   `pull_request:`: Workflow запустится при создании или обновлении `pull request` (запроса на слияние) в ветку `main`. Это критично для проверки кода перед его слиянием в основную ветку. Такая комбинация триггеров является стандартной практикой, так как она предотвращает двойной запуск пайплайна при отправке изменений в ветку с уже открытым PR.

=== `jobs:` - Задачи Workflow

Workflow состоит из одной или нескольких задач (`jobs`). В нашем примере одна задача — `hello_world_job`. По умолчанию, если задач несколько, они выполняются параллельно.

*   `name: Say Hello`: Имя задачи, которое будет отображаться в UI.
*   `runs-on: macos-latest`: Указывает, на каком типе виртуальной машины (раннере) будет выполняться задача. Для iOS-разработки всегда требуется `macos-latest`.

==== `steps:` - Шаги задачи

Каждая задача состоит из последовательности шагов (`steps`), которые выполняются по порядку.

*   `- name: Checkout code`:
    *   `uses: actions/checkout@v4`: Этот стандартный action клонирует ваш репозиторий на раннер, чтобы у пайплайна был доступ к коду.

*   `- name: Print Xcode version`:
    *   `run: ...`: Этот шаг выполняет несколько команд в терминале. Он выводит "Hello, world!" и версию Xcode, установленную на раннере.

=== Что дальше?

Это основа, на которую мы будем надстраивать более сложные шаги. В следующем уроке мы рассмотрим, как добавить в CI полноценный статический анализ кода.