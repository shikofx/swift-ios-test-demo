= Unit-тесты для ProductPageDetailViewController

Этот документ описывает unit-тесты для экрана "Детали продукта" (`ProductPageDetailViewController`).
Цель этих тестов — проверить корректность бизнес-логики, связанной с добавлением товаров в корзину.

== 1. Логика добавления в корзину (`addToCartButton`)

=== UC-PPDV-001: Добавление нового товара в корзину

*Название:* Добавление товара, которого еще нет в корзине.

*Предусловие:*
. Корзина пользователя пуста (`Engine.sharedInstance.cartList` пуст).
. На странице товара выбрано количество `Q`.

*Шаги:*
. Вызвать метод `addToCartButton()`.

*Ожидаемый результат:*
. В массив `Engine.sharedInstance.cartList` добавляется один новый элемент.
. `Engine.sharedInstance.cartCount` увеличивается на `Q`.

=== UC-PPDV-002: Добавление существующего товара с другим цветом

*Название:* Добавление того же товара, но с другим цветом, должно создавать новую позицию в корзине.

*Предусловие:*
. В корзине уже есть товар с `Id = X` и `ProductColor = "Синий"`.
. На странице товара выбран тот же товар (`Id = X`), но с `selectedColor = "Красный"`.

*Шаги:*
. Вызвать метод `addToCartButton()`.

*Ожидаемый результат:*
. В массив `Engine.sharedInstance.cartList` добавляется *новый* элемент. Общее количество элементов в корзине увеличивается.

=== UC-PPDV-003: Добавление полностью идентичного товара

*Название:* Добавление товара, который уже есть в корзине (тот же ID и цвет), должно увеличивать его количество.

*Предусловие:*
. В корзине уже есть товар с `Id = X`, `ProductColor = "Синий"` и количеством `Q1`.
. На странице товара выбран тот же товар (`Id = X`, `selectedColor = "Синий"`) с количеством `Q2`.

*Шаги:*
. Вызвать метод `addToCartButton()`.

*Ожидаемый результат:*
. Новый элемент в `Engine.sharedInstance.cartList` *не добавляется*.
. У существующего товара количество (`ProductQuantity`) становится равно `Q1 + Q2`.

== 2. Логика изменения количества товара на странице

=== UC-PPDV-004: Увеличение количества товара

*Название:* Нажатие на кнопку "+" увеличивает локальный счетчик количества.

*Предусловие:*
. На странице товара выбрано количество `Q`.

*Шаги:*
. Вызвать метод `addButton()`.

*Ожидаемый результат:*
. Внутреннее свойство `productQuantity` становится равно `Q + 1`.

=== UC-PPDV-005: Уменьшение количества товара

*Название:* Нажатие на кнопку "-" уменьшает локальный счетчик, но не ниже 1.

*Предусловие:*
. На странице товара выбрано количество `1`.

*Шаги:*
. Вызвать метод `subtractButton()`.

*Ожидаемый результат:*
. Внутреннее свойство `productQuantity` становится равно `0`, но UI должен блокировать уменьшение ниже 1. Тест проверит, что значение не уходит в минус.