# Детальный План Работы над проектом "swift-ios-test-demo"

Этот документ описывает поэтапный план по созданию тестового фреймворка для iOS-приложения `SDET Demo App`. Цель — создать исчерпывающее портфолио, демонстрирующее навыки в автоматизации тестирования iOS-приложений.

**Контекст:** Разработка ведется на основе знаний, полученных в ходе прохождения курса в отдельном проекте `ios-automation-cource-unit`. Этот план сфокусирован на применении теории для создания чистового портфолио.

**Сроки:** 08.10.2025 - 31.10.2025.

## Структура веток

Проект будет развиваться поэтапно. Каждый этап соответствует отдельной `feature`-ветке, которая создается из `main` и после завершения вливается обратно.

| Ветка | Описание | Ключевые технологии |
| :--- | :--- | :--- |
| `feature/1-project-ci` | **Настройка CI/CD:** Создание пайплайна для сборки, анализа и отчетности. | `GitHub Actions`, `Allure` |
| `feature/2-unit-tests` | **Unit-тестирование:** Покрытие бизнес-логики Unit-тестами. | `XCTest`, `TDD` |
| `feature/3-basic-ui-tests` | **Первые UI-тесты:** Написание базовых тестов и реализация Page Object. | `XCUITest`, `Page Object` |
| `feature/4-snapshot-tests` | **Snapshot-тестирование:** Внедрение тестов для отслеживания визуальных регрессий. | `SnapshotTesting`, `SPM` |
| `feature/5-gitlab-ci` | **Настройка GitLab CI:** Добавление второго пайплайна для GitLab. | `GitLab CI`, `YAML` |
| `feature/6-abstractions` | **Слой абстракций:** Создание оберток для упрощения работы с UI-элементами. | `Swift`, `XCUITest` |
| `feature/7-helpers-services` | **Вспомогательные сервисы:** Реализация хелперов для работы с тестовыми данными и API. | `Swift`, `URLSession` |
| `feature/8-reporting-cloud` | **Отчетность и облака:** Интеграция с Allure Report и облачными фермами. | `Allure`, `BrowserStack` |
| `feature/9-final-refactoring` | **Финальный рефакторинг:** Улучшение кода и документации. | `Swift`, `Markdown` |

---

## Этап 1: Настройка CI/CD, статического анализа и отчетности (08.10 - 17.10)

**Цель:** Создать надежный и масштабируемый CI/CD пайплайн, включающий статический анализ, сборку, запуск тестов и генерацию отчетов.

* [x] **Теория (курс `ios-automation-cource-unit`):**
  * [x] **Модуль "Основы Unit-тестирования":**
    * [x] **Урок 1-4: Изучение теории.**
    * [x] **Урок 5: Выполнение домашнего задания.**
      * [x] **Детали ДЗ:** Написать Unit-тесты для `ViewModel`, покрыв различные сценарии и используя разнообразные ассерты.
      * [x] **Критерии зачета:** Все проверки корректны, использованы разные виды ассертов (не только `XCTAssertTrue`), CI пайплайн "зеленый".
      * [x] **Чеклист работы над ДЗ:**
        * [x] Сделать fork репозитория `Lesson-2-Unit-Tests`.
        * [x] Создать ветку `Lesson-2-Unit-Tests-Homework`.
        * [x] Написать тесты согласно требованиям.
        * [x] Убедиться, что все тесты проходят локально.
        * [x] Запушить изменения в свою ветку.
        * [x] Создать Merge Request в `Lesson-2-Unit-Tests`.
        * [x] Приложить скриншот с пройденными тестами к MR.
        * [x] Отправить ссылки на проект и MR на проверку.
* [x] **Портфолио (`swift-ios-test-demo`):**
  * [x] **Ветка:** `feature/1-project-ci`
  * [x] **Настройка проекта:**
    * [x] Создать новый Xcode-проект и добавить таргет для Unit-тестов.
    * [x] Добавить в проект исходный код приложения `my-demo-app-ios`.
    * [x] Убедиться, что приложение собирается и запускается.
  * [x] **Настройка CI/CD (GitHub Actions):**
    * [x] Создать модульные workflows (`ci-flow`, `static-analysis`, `build-for-testing`, `unit-tests`, `deploy-reports`).
    * [x] Оптимизировать пайплайн, разделив сборку и запуск тестов.
  * [x] **Настройка отчетности:**
    * [x] Интегрировать Allure Report для тестовых отчетов.
    * [x] Настроить генерацию отчетов для SwiftLint и SwiftFormat.
    * [x] Настроить публикацию всех отчетов на GitHub Pages с единой точкой входа.
    * [x] Реализовать сохранение истории запусков (trends) в Allure.
  * [x] **Документация:**
    * [x] Создать документы по статическому анализу и Allure.
* [x] **Финализация:**
  * [x] Выполнить слияние ветки `feature/1-project-ci` в `main`.

## Этап 2: Разработка Unit-тестов (15.10 - 18.10)

**Цель:** Покрыть ключевую бизнес-логику приложения unit-тестами для обеспечения стабильности кода.

* [ ] **Теория (курс `ios-automation-cource-unit`):**
  * [ ] **Получение аппрува от ментора по ДЗ "Основы Unit-тестирования".** (Ожидание)
* [ ] **Портфолио (`swift-ios-test-demo`):**
  * [ ] **Ветка:** `feature/2-unit-tests`
  * [ ] **Планирование:**
    * [ ] Проанализировать код и определить ключевые компоненты для тестирования.
    * [ ] Разработать и задокументировать тест-кейсы для `MyCartViewController`, `CatalogViewController`, `ProductPageDetailViewController` и др.
  * [ ] **Реализация:**
    * [ ] Написать unit-тесты для `MyCartViewController` (расчет стоимости, управление товарами).
    * [ ] Написать unit-тесты для `CatalogViewController` (сортировка).
    * [ ] Написать unit-тесты для `ProductPageDetailViewController` (логика добавления в корзину).
    * [ ] Написать unit-тесты для `LoginViewController` и `WebViewViewController` (валидация и обработка URL).
* [ ] **Финализация:**

  * [ ] Выполнить слияние ветки `feature/2-unit-tests` в `main`.

## Этап 3: Реализация базовых UI-тестов и Page Objects (19.10 - 22.10)

**Цель:** Написать первые полноценные UI-тесты, применив паттерн `Page Object`.

* [ ] **Ветка:** `feature/3-basic-ui-tests`
* [ ] **Задачи по проекту (`swift-ios-test-demo`):**

  * [ ] Добавить в проект таргет для UI-тестов.
  * [ ] Создать базовый тестовый класс `BaseUITest` с настройкой `XCUIApplication` в `setUpWithError`.
  * [ ] Реализовать Page Objects для основных экранов приложения.
  * [ ] Написать UI-тесты на ключевые пользовательские сценарии (например, авторизация, добавление товара в корзину).
* [ ] **Финализация:**

  * [ ] Выполнить слияние ветки `feature/3-basic-ui-tests` в `main`.

## Этап 4: Внедрение Snapshot-тестирования (23.10 - 24.10)

**Цель:** Добавить в проект тесты для проверки UI на визуальные регрессии.

* [ ] **Ветка:** `feature/4-snapshot-tests`
* [ ] **Задачи по изучению курса (`ios-automation-cource-unit`):**

  * [ ] **Тема: Snapshot-тестирование:**
    * [ ] Изучение теории (концепция, библиотека `SnapshotTesting`).
    * [ ] Выполнение домашнего задания.
    * [ ] Получение аппрува от ментора.
* [ ] **Задачи по проекту (`swift-ios-test-demo`):**

  * [ ] Добавить зависимость `SnapshotTesting` через Swift Package Manager.
  * [ ] Настроить базовый класс `BaseSnapshotTest` для конфигурации тестов (например, определение стратегий для разных устройств).
  * [ ] Написать snapshot-тесты для `LoginScreen` и `ProductsScreen`.
  * [ ] Записать эталонные снимки и добавить их в репозиторий.
* [ ] **Финализация:**

  * [ ] Выполнить слияние ветки `feature/4-snapshot-tests` в `main`.

## Этап 5: Настройка GitLab CI (25.10 - 26.10)

**Цель:** Добавить поддержку CI/CD в GitLab для демонстрации навыков работы с разными системами.

* [ ] **Ветка:** `feature/5-gitlab-ci`
* [ ] **Задачи по проекту (`swift-ios-test-demo`):**

  * [ ] Создать workflow `.gitlab-ci.yml`.
  * [ ] Настроить job с тегом `macos`, который запускает UI-тесты (потребуется self-hosted macOS runner).
  * [ ] Убедиться, что тесты успешно выполняются в GitLab CI.
* [ ] **Финализация:**

  * [ ] Выполнить слияние ветки `feature/5-gitlab-ci` в `main`.

## Этап 6: Создание слоя абстракций (27.10 - 28.10)

**Цель:** Упростить синтаксис тестов и повысить их читаемость, применив знания об архитектуре фреймворка.

* [ ] **Ветка:** `feature/6-abstractions`
* [ ] **Задачи по изучению курса (`ios-automation-cource-unit`):**

  * [ ] **Модуль 5 (Часть 1): Слои абстракции:**
    * [ ] Изучение теории (обертки, базовые классы/протоколы).
    * [ ] Выполнение домашнего задания.
    * [ ] Получение аппрува от ментора.
* [ ] **Задачи по проекту (`swift-ios-test-demo`):**

  * [ ] Создать `enum` `AppElement` для хранения идентификаторов всех UI-элементов.
  * [ ] Создать `protocol` `Screen` (или базовый класс), от которого будут наследоваться все Page Objects.
  * [ ] Реализовать `extension` для `XCUIElement` с методами-обертками (например, `waitAndTap()`, `clearAndTypeText()`).
  * [ ] Провести рефакторинг существующих тестов и Page Objects для использования новых абстракций.
* [ ] **Финализация:**

  * [ ] Выполнить слияние ветки `feature/6-abstractions` в `main`.

## Этап 7: Реализация хелперов и сервисов (29.10)

**Цель:** Создать вспомогательные инструменты для генерации тестовых данных и (опционально) взаимодействия с API.

* [ ] **Ветка:** `feature/7-helpers-services`
* [ ] **Задачи по изучению курса (`ios-automation-cource-unit`):**

  * [ ] **Модуль 5 (Часть 2): Хелперы и сервисы:**
    * [ ] Изучение теории (генерация данных, работа с API).
    * [ ] Выполнение домашнего задания.
    * [ ] Получение аппрува от ментора.
* [ ] **Задачи по проекту (`swift-ios-test-demo`):**

  * [ ] **Data Helper:** Создать генератор тестовых пользователей (валидный, заблокированный и т.д.).
  * [ ] **API Client (Опционально):** Реализовать простой API-клиент с помощью `URLSession` для сброса состояния приложения или подготовки данных перед тестом (если у `Sauce Demo` есть API).
* [ ] **Финализация:**

  * [ ] Выполнить слияние ветки `feature/7-helpers-services` в `main`.

## Этап 8: Интеграция с Allure и облачными сервисами (30.10)

**Цель:** Настроить генерацию наглядных отчетов и запуск тестов на реальных устройствах в облаке.

* [ ] **Ветка:** `feature/8-reporting-cloud`
* [ ] **Задачи по изучению курса (`ios-automation-cource-unit`):**

  * [ ] **Тема: Отчетность и облака:**
    * [ ] Изучение теории (Allure, облачные фермы).
    * [ ] Выполнение домашнего задания.
    * [ ] Получение аппрува от ментора.
* [ ] **Задачи по проекту (`swift-ios-test-demo`):**

  * [ ] Интегрировать Allure Report: найти или адаптировать инструмент для конвертации `.xcresult` в формат Allure.
  * [ ] **GitHub Actions:** Настроить публикацию Allure-отчета на GitHub Pages.
  * [ ] **GitLab CI:** Настроить публикацию Allure-отчета на GitLab Pages.
* [ ] **Финализация:**

  * [ ] Выполнить слияние ветки `feature/8-reporting-cloud` в `main`.

## Этап 9: Финальный рефакторинг и документация (31.10)

**Цель:** Привести кодовую базу и документацию в порядок, подготовить проект к демонстрации.

* [ ] **Ветка:** `feature/9-final-refactoring`
* [ ] **Задачи по проекту (`swift-ios-test-demo`):**

  * [ ] Провести ревью всего кода, добавить комментарии, улучшить именование.
  * [ ] Обновить `README.md` для проекта, описав его архитектуру, стек и как запустить тесты.
* [ ] **Финализация:**

  * [ ] Выполнить слияние ветки `feature/9-final-refactoring` в `main`. Проект готов!
